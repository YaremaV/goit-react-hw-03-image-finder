{"version":3,"sources":["component/Searchbar/searchbar.module.css","component/Button/button.module.css","component/Searchbar/Searchbar.js","component/api-server/api-server.js","component/ImageGalleryItem/Imagegalleryitem.js","component/Button/Button.js","component/Modal/Modal.js","component/Imagegallery/Imagegallery.js","component/Container/Container.js","component/Layout/Layout.js","App.js","index.js"],"names":["module","exports","Searchbar","state","image","handleImageChange","EventTarget","setState","currentTarget","value","toLowerCase","handleSubmit","evt","preventDefault","trim","props","onSubmit","toast","error","position","theme","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","PhotoApiServer","searchQuery","page","url","fetch","then","response","ok","json","hits","length","incrementPage","newQuery","ImageGalleryItem","map","id","tag","webformatURL","largeImageURL","src","alt","Button","onClick","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","photoApiServer","ImageGallery","images","showModal","loading","toggleModal","console","log","prevProps","prevState","imageName","query","fetchImages","catch","finally","addImage","Container","children","Layout","App","handleFormSubmit","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1dc206d6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"searchbar_Searchbar__3nHaB\",\"SearchForm\":\"searchbar_SearchForm__1A2kx\",\"SearchFormButton\":\"searchbar_SearchFormButton__1ki3l\",\"SearchForm-button\":\"searchbar_SearchForm-button__2wJtP\",\"SearchFormButtonLabel\":\"searchbar_SearchFormButtonLabel__2MJtz\",\"SearchFormInput\":\"searchbar_SearchFormInput__3bmyB\",\"SearchForm-input\":\"searchbar_SearchForm-input__3hoOv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"button_Button__9Fm20\"};","import React, { Component } from 'react';\nimport s from './searchbar.module.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    image: '',\n  };\n\n  handleImageChange = EventTarget => {\n    this.setState({ image: EventTarget.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = evt => {\n    evt.preventDefault();\n    if (this.state.image.trim() === '') {\n      toast.error('Введите название изображения!', {\n        position: 'top-left',\n        theme: 'colored',\n      });\n      return;\n    }\n\n    this.props.onSubmit(this.state.image);\n\n    this.setState({ image: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.image}\n            onChange={this.handleImageChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '22938064-7e67cff9dc13648fb3a6e967b';\n\n// function fetchImages(searchQuery, incrementPage) {\n//   return fetch(\n//     `${BASE_URL}?q=${searchQuery}&page=${incrementPage}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n//   ).then(response => {\n//     if (response.ok) {\n//       return response.json();\n//     }\n//   });\n// }\n\n// const api = { fetchImages };\n// export default api;\n\nexport default class PhotoApiServer {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\n\n    return fetch(url)\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n      })\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return 'error';\n        }\n        this.incrementPage();\n        return hits;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import React from 'react';\nimport './imagegallaryitem.css';\n\nconst ImageGalleryItem = ({ hits }) => (\n  <>\n    {hits?.map(({ id, tag, webformatURL, largeImageURL }) => (\n      <li key={id} className=\"ImageGalleryItem\">\n        <img src={webformatURL} alt={tag} className=\"ImageGalleryItem-image\" />\n      </li>\n    ))}\n  </>\n);\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport s from './button.module.css';\n\nexport default function Button({ onClick }) {\n  return (\n    <button onClick={onClick} type=\"button\" className={s.Button}>\n      Load more\n    </button>\n  );\n}\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom/cjs/react-dom.development';\nimport './modal.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <h2>Title</h2>\n          <img src=\"\" alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './imagegallery.css';\nimport PhotoApiServer from '../api-server/api-server';\nimport ImageGalleryItem from '../ImageGalleryItem/Imagegalleryitem';\nimport Button from '../Button/Button';\nimport Modal from '../Modal/Modal';\n\nconst photoApiServer = new PhotoApiServer();\n\nexport default class ImageGallery extends Component {\n  state = {\n    images: [],\n    showModal: false,\n    loading: false,\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.imageName !== this.props.imageName) {\n      this.setState({ loading: true });\n      console.log('prevProps.imageName', prevProps.imageName);\n      console.log('props.imageName', this.props.imageName);\n\n      photoApiServer.query = this.props.imageName;\n      photoApiServer\n        .fetchImages()\n        .then(images => this.setState({ images, loading: false }))\n        .catch(error => this.setState({ error }))\n        .finally(() => this.setState({ loading: false }));\n    }\n  }\n\n  toggleModal = () => {\n    console.log('click');\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  addImage() {\n    console.log('click');\n    photoApiServer.fetchImages();\n  }\n\n  render() {\n    return (\n      <>\n        <ul className=\"ImageGallery\" onClick={this.props.onClick}>\n          {this.state.images && (\n            <ImageGalleryItem\n              hits={this.state.images}\n              imageName={this.props.imageName}\n            />\n          )}\n        </ul>\n        {this.props.imageName && <Button onClick={this.addImage} />}\n        {this.state.showModal && <Modal onClick={this.toggleModal} />}\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport './Container.css';\n\nconst Container = ({ children }) => <div className=\"Container\">{children}</div>;\n\nexport default Container;\n","import React from 'react';\n\nimport Container from '../Container/Container';\n\nconst Layout = ({ children }) => (\n  <>\n    <Container>{children}</Container>\n  </>\n);\n\nexport default Layout;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './component/Searchbar/Searchbar';\nimport ImageGallery from './component/Imagegallery/Imagegallery';\n\nimport Layout from './component/Layout/Layout';\n\nexport default class App extends Component {\n  state = {\n    image: '',\n  };\n\n  componentDidMount() {\n    console.log('App componentDidMount');\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log('App componentDidUpdate');\n  }\n\n  handleFormSubmit = image => {\n    this.setState({ image });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery imageName={this.state.image} onClick={this.toggleModal} />\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </Layout>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './App.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App className={App} />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
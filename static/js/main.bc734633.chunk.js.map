{"version":3,"sources":["component/Button/button.module.css","component/Searchbar/Searchbar.js","component/api-server/api-server.js","component/Modal/Modal.js","component/ImageGalleryItem/Imagegalleryitem.js","component/Button/Button.js","component/InputMessage/InputMesage.js","component/Imagegallery/Imagegallery.js","component/Container/Container.js","component/Layout/Layout.js","App.js","index.js","component/Searchbar/searchbar.module.css"],"names":["module","exports","Searchbar","state","image","handleImageChange","EventTarget","setState","currentTarget","value","toLowerCase","handleSubmit","evt","preventDefault","trim","props","onSubmit","toast","error","position","theme","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","PhotoApiServer","searchQuery","page","url","fetch","then","response","ok","json","Promise","reject","Error","newQuery","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","onClick","children","ImageGalleryItem","showModal","toggleModal","console","log","src","alt","descr","bigImg","Button","InputMessage","photoApiServer","ImageGallery","images","status","updateImagesArray","update","prev","scrollView","length","scrollTo","top","documentElement","scrollHeight","behavior","addImage","updateImages","prevProps","prevState","prevName","imageName","currentName","resetPage","query","fetchImages","result","hits","incrementPage","catch","color","height","width","timeout","message","map","webformatURL","largeImageURL","tag","id","Container","Layout","App","handleFormSubmit","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bc734633.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"button_Button__9Fm20\"};","import React, { Component } from 'react';\nimport s from './searchbar.module.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    image: '',\n  };\n\n  handleImageChange = EventTarget => {\n    this.setState({ image: EventTarget.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = evt => {\n    evt.preventDefault();\n    if (this.state.image.trim() === '') {\n      toast.error('Введите название изображения!', {\n        position: 'top-left',\n        theme: 'colored',\n      });\n      return;\n    }\n\n    this.props.onSubmit(this.state.image);\n\n    this.setState({ image: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.image}\n            onChange={this.handleImageChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '22938064-7e67cff9dc13648fb3a6e967b';\n\nexport default class PhotoApiServer {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`;\n\n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(new Error(`Image ${this.searchQuery} not found`));\n    });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom/cjs/react-dom.development';\nimport './modal.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './imagegallaryitem.css';\nimport Modal from '../Modal/Modal';\n\nexport default class ImageGalleryItem extends Component {\n  state = {\n    showModal: false,\n  };\n\n  toggleModal = () => {\n    console.log('click');\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { showModal } = this.state;\n    return (\n      <>\n        <li className=\"ImageGalleryItem\">\n          <img\n            src={this.props.src}\n            alt={this.props.descr}\n            data-image={this.props.bigImg}\n            onClick={this.toggleModal}\n            className=\"ImageGalleryItem-image\"\n          />\n        </li>\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={this.props.bigImg} alt={this.props.descr} />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport s from './button.module.css';\n\nexport default function Button({ onClick }) {\n  return (\n    <button onClick={onClick} type=\"button\" className={s.Button}>\n      Load more\n    </button>\n  );\n}\n","import React from 'react';\r\nimport './inputmessage.css';\r\n\r\nexport default function InputMessage() {\r\n  return <h2 className=\"title\">Input name Images </h2>;\r\n}\r\n","import React, { Component } from 'react';\nimport './imagegallery.css';\nimport PhotoApiServer from '../api-server/api-server';\nimport ImageGalleryItem from '../ImageGalleryItem/Imagegalleryitem';\nimport Button from '../Button/Button';\nimport InputMessage from '../InputMessage/InputMesage';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nimport Loader from 'react-loader-spinner';\n\nconst photoApiServer = new PhotoApiServer();\n\nexport default class ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevProps.imageName;\n    const currentName = this.props.imageName;\n\n    if (prevName !== currentName) {\n      this.setState({ status: 'pending' });\n      photoApiServer.resetPage();\n      photoApiServer.query = currentName;\n      this.updateImages(currentName);\n    }\n  }\n\n  updateImages() {\n    photoApiServer\n      .fetchImages()\n      .then(result => {\n        if (result.hits.length > 0) {\n          this.updateImagesArray(result.hits);\n          photoApiServer.incrementPage();\n          this.scrollView();\n          return;\n        }\n        throw new Error(`Sorry, but not found images ${this.props.imageName}`);\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  }\n\n  updateImagesArray = update => {\n    if (photoApiServer.page === 1) {\n      this.setState({ images: update, status: 'resolved' });\n      return;\n    }\n    this.setState(prev => {\n      return { images: [...prev.images, ...update], status: 'resolved' };\n    });\n  };\n\n  scrollView = () => {\n    if (this.state.images.length > 12) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n    return;\n  };\n\n  addImage = () => {\n    this.setState({ status: 'pending' });\n    this.updateImages('cat');\n  };\n\n  // idle;\n  // pending;\n  // resolved;\n  // rejected;\n\n  render() {\n    const { images, error, status } = this.state;\n\n    if (status === 'idle') {\n      return <InputMessage />;\n    }\n\n    if (status === 'pending') {\n      return (\n        <Loader\n          type=\"ThreeDots\"\n          color=\"#00BFFF\"\n          height={300}\n          width={300}\n          timeout={3000}\n        />\n      );\n    }\n    if (status === 'rejected') {\n      return <h2>{error.message}</h2>;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className=\"ImageGallery\" onClick={this.props.onClick}>\n            {images.map(image => {\n              return (\n                <ImageGalleryItem\n                  key={image.id}\n                  src={image.webformatURL}\n                  bigImg={image.largeImageURL}\n                  descr={image.tag}\n                  imageName={this.props.imageName}\n                />\n              );\n            })}\n          </ul>\n\n          <Button onClick={this.addImage} />\n        </>\n      );\n    }\n  }\n}\n","import React from 'react';\nimport './Container.css';\n\nconst Container = ({ children }) => <div className=\"Container\">{children}</div>;\n\nexport default Container;\n","import React from 'react';\n\nimport Container from '../Container/Container';\n\nconst Layout = ({ children }) => (\n  <>\n    <Container>{children}</Container>\n  </>\n);\n\nexport default Layout;\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './component/Searchbar/Searchbar';\nimport ImageGallery from './component/Imagegallery/Imagegallery';\n\nimport Layout from './component/Layout/Layout';\n\nexport default class App extends Component {\n  state = {\n    image: '',\n  };\n\n  handleFormSubmit = image => {\n    this.setState({ image });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery imageName={this.state.image} onClick={this.toggleModal} />\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </Layout>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './App.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App className={App} />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"searchbar_Searchbar__3nHaB\",\"SearchForm\":\"searchbar_SearchForm__1A2kx\",\"SearchFormButton\":\"searchbar_SearchFormButton__1ki3l\",\"SearchForm-button\":\"searchbar_SearchForm-button__2wJtP\",\"SearchFormButtonLabel\":\"searchbar_SearchFormButtonLabel__2MJtz\",\"SearchFormInput\":\"searchbar_SearchFormInput__3bmyB\",\"SearchForm-input\":\"searchbar_SearchForm-input__3hoOv\"};"],"sourceRoot":""}